(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{YMiO:function(n,e,t){"use strict";t.r(e);var o=t("mrSG"),a=t("CcnG"),r=t("ZYCi"),i=t("oNRu"),s=t("0I1l"),c=t("4qth"),l=t("gIcY"),g=function(){function n(n,e,t,o,a,r,i){this.userService=n,this.collabservice=e,this.conversation=t,this.router=o,this.userservie=a,this.activeRoute=r,this.formBuilder=i}return n.prototype.ngOnInit=function(){return o.b(this,void 0,void 0,function(){var n=this;return o.e(this,function(e){switch(e.label){case 0:return this.userservie.getUserdetails().subscribe(function(e){n.user=e.username}),[4,this.activeRoute.paramMap.subscribe(function(e){n.convoIdent=e.get("unameOrCollabId"),n.getMessages(),setTimeout(function(){window.connect(localStorage.getItem("accessToken"))},2e3),setInterval(function(){n.loopPingCheck()},1e3)})];case 1:return e.sent(),this.userservie.getUserdetails().subscribe(function(e){n.user=e.username}),[2]}})})},n.prototype.loopPingCheck=function(){window.PingReceived&&(window.PingReceived=!1,console.log("Angular Detected Ping Receive, getting new messages."),this.getMessages())},n.prototype.getMessages=function(){var n=this;-1!=this.convoIdent.indexOf("@myhunter.cuny.edu")?this.conversation.getMessages(this.convoIdent,!1).subscribe(function(e){n.messages=e[0].messages.reverse(),console.log(n.messages)}):this.conversation.getMessages(this.convoIdent,!0).subscribe(function(e){n.messages=e[0].messages.reverse(),console.log(n.messages)})},n.prototype.sendMessage=function(){console.log("Sending message : "+this.messageInput),-1!=this.convoIdent.indexOf("@myhunter.cuny.edu")?this.conversation.sendPersonalMessage(this.messageInput,this.convoIdent).subscribe(function(n){console.log(n)}):this.conversation.sendMessageToCollabGroup(this.messageInput,this.convoIdent).subscribe(function(n){console.log(n)})},n=o.c([Object(a.n)({selector:"app-collab-messaging",template:t("j/FM"),styles:[t("dPzR")]}),o.f("design:paramtypes",[i.a,c.a,s.a,r.b,i.a,r.a,l.a])],n)}(),d=function(){function n(n,e,t){this.collab=n,this.userservice=e,this.router=t,this.gropuMess=new Array,this.ContactList=new Array,this.user=null}return n.prototype.ngOnInit=function(){var n=this;this.collab.collabDetails().subscribe(function(e){n.collabData=e,console.log(e)}),this.userservice.getUserdetails().subscribe(function(e){n.user=e.username}),this.userservice.getConversations().subscribe(function(e){return n.convos=e})},n.prototype.gotoConvo=function(n){n.otherUser?(console.log("Goto personal convo: "+n.otherUser),this.router.navigate(["/conversations/message/",n.otherUser])):(console.log("Goto collab convo: "+n._id.$oid),this.router.navigate(["/conversations/message/",n._id.$oid]))},n.prototype.remove_duplicates=function(n){for(var e={},t=[],o=0;o<n.length;o++)e[n[o]]=!0;for(var a in e)t.push(a);return t},n.prototype.extractFirstNameAndLastName=function(n){return n.split("@")[0]},n.prototype.groupMessageingPageLink=function(n){this.collabId=n,this.mem=null,console.log("Going to Group message "+this.collabId),console.log("member "+this.mem),this.router.navigateByUrl("/conversations")},n.prototype.PersonalmessagePageLink=function(n){this.mem=n,this.collabId=null,console.log("Going to message page of "+this.mem),console.log("CollabId "+this.collabId),this.router.navigateByUrl("/conversations")},n.prototype.getTitle=function(n){this.Title_=n,console.log("Showing title "+this.Title_)},n=o.c([Object(a.n)({selector:"app-messenger",template:t("sIbu"),styles:[t("yYmg")]}),o.f("design:paramtypes",[c.a,i.a,r.b])],n)}(),m=[{path:"message/:unameOrCollabId",component:g},{path:"",component:d}],p=function(){function n(){}return n=o.c([Object(a.K)({imports:[r.c.forChild(m)],exports:[r.c]})],n)}(),u=t("Ip0R"),b=t("VWX5"),h=t("4tE/"),f=t("Wf4p"),x=t("r43C"),v=t("/dO6"),y=t("qAlS"),k=t("BHnd"),w=t("0/Q6"),I=t("UodH"),C=t("FVSy"),M=t("SMsm"),S=t("La40"),P=t("jlZm"),O=t("wmQ5"),R=t("seP3"),U=t("b716"),j=t("jQLj");t.d(e,"ConversationsModule",function(){return z});var z=function(){function n(){}return n=o.c([Object(a.K)({declarations:[g,d],imports:[u.b,p,S.a,C.a,M.a,I.a,w.a,P.a,k.a,y.b,v.a,x.a,O.a,R.c,U.b,j.a,f.j,h.b,b.a,b.b,l.d,l.i]})],n)}()},dPzR:function(n,e){n.exports="ol{\n    list-style: none;\n    margin: 0;\n    padding: 0;\n  }\n  \n  ol li{\n    display:inline-block;\n    clear: both;\n    padding: 20px;\n    border-radius: 30px;\n    margin-bottom: 2px;\n    font-family: Helvetica, Arial, sans-serif;\n  }\n  \n  .him{\n    background: #eee;\n    float: left;\n  }\n  \n  .me{\n  \n    \n    float: right;\n    background:blue;\n    color: #fff;\n  }\n  \n  .him + .me{\n    border-bottom-right-radius: 5px;\n  }\n  \n  .me + .me{\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n  }\n  \n  .me:last-of-type {\n    border-bottom-right-radius: 30px;\n  }\n  \n  .message{\n    float: right;\n    color: #fff;\n  }\n  \n  .message{\n    border-bottom-right-radius: 5px;\n  }\n  \n  .message{\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n  }\n  \n  .message:last-of-type {\n    border-bottom-right-radius: 30px;\n  }\n  \n  .messa{\n    z-index: 0; \n      position: fixed; \n      display: flex;\n      align-self: flex-end; \n      bottom: 7%; \n      margin-bottom: 0px;\n      margin-left: 80%; \n  }\n  \n  /* Place the navbar at the bottom of the page, and make it stick */\n  \n  .navbar {\n    z-index: inherit 0;\n    background-color: #333;\n    position: fixed;\n    bottom: 5px;\n    max-width: 800px;\n  }\n  \n  .messageSender{\n      z-index: 5; \n      position: fixed; \n      display: flex;\n      align-self: flex-end; \n      bottom: 7%; \n      margin-bottom: 5px;\n      margin-left: 80%; \n      background-color: #0084ff\n  }\n  \n  .avatar {\n      vertical-align: middle;\n      width: 50px;\n      height: 50px;\n      border-radius: 50%;\n    }\n  \n  .container-bottom {\n      float: right;\n      position: fixed;\n      bottom: 0;\n  }\n  \n  /* Chat containers */\n  \n  .container {\n    border: 2px solid #dedede;\n    background-color: #f1f1f1;\n    border-radius: 5px;\n    padding: 10px;\n    margin: 10px 0;\n  }\n  \n  /* Chat containers */\n  \n  .container2 {\n    border: 4px solid #dedede;\n    background-color: plum;\n    border-radius: 5px;\n    padding: 10px;\n    margin: 10px 0;\n    text-align: center;\n  }\n  \n  /* Darker chat container */\n  \n  .darker {\n    border-color: #ccc;\n    background-color: #ddd;\n  }\n  \n  /* Clear floats */\n  \n  .container::after {\n    content: \"\";\n    clear: both;\n    display: table;\n  }\n  \n  .right {\n    float: right;\n    margin-left: 20px;\n    margin-right:0;\n    font-size: 10px;\n  }\n  \n  .left {\n    float: left;\n    margin-right: 20px;\n    margin-left:0;\n    font-size: 10px;\n  }\n  \n  /* Style time text */\n  \n  .time-right {\n    float: right;\n    color: #aaa;\n  }\n  \n  /* Style time text */\n  \n  .time-left {\n    float: left;\n    color: #999;\n  }\n  \n  .mat-card {\n    max-width: 800px;\n    margin: auto;\n    padding: 0px;\n    height: 100%;\n    background: rgba(214, 212, 212, 0.048);\n    border: .4px solid rgb(59, 59, 59);\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n  }\n  \n  .mat-card-header {\n   \n    font-weight: bold;\n    display: inline;\n    \n  }\n  \n  .mat-card-title  {\n    margin-left: -16px;\n    margin-right: -16px;\n    margin-top: 0px;\n    color: rgba(0, 0, 0, 0.836);\n    background: rgba(34, 34, 34, 0.13);\n    padding: 5px;\n  }\n  \n  .mat-card-content {\n    margin: 0px;\n  }\n  \n  .mat-card>.mat-card-actions:last-child {\n    margin-bottom: 5px;\n   \n  }\n  \n  .mat-card-actions .mat-button, .mat-card-actions .mat-raised-button{\n    margin: 0px;\n    margin-left: 22px;\n  }\n  \n  .mat-expansion-panel {\n    background: rgba(255, 254, 254, 0.151);\n  }\n  \n  .requirements {\n    margin-left: 30px;\n    margin-right: 30px;\n    \n  }\n  \n  .noBg {\n    background-color: rgba(214, 212, 212, 0.048);\n  }\n  \n  .content .description{\n    font-size: 20px;\n    margin-left: 30px;\n    margin-right: 30px;\n  }\n  \n  .content .date,.location,.duration{\n    margin-left: 40px;\n    margin-right: 40px;\n  }\n  \n  .mat-card {\n    font-family: Georgia, 'Times New Roman', Times, serif;\n  }\n  \n  \n  \n  \n  \n"},"j/FM":function(n,e){n.exports='\n<mat-card >\n        <div class="container noBg">\n                        <ol   *ngFor="let message of  messages">\n                                \n                                        <div *ngIf="message.sender===user">\n                                                <li class="me">\n                                                        {{message.message.message}}<br>\n                                                        <span class="right"> {{message.dispName}}</span>\n                                                        </li>\n                                        </div>\n                                        <div *ngIf="message.sender!==user">\n                                                <li class="him">   \n                                                        {{message.message}}<br>\n                                                        <span class="left"> {{message.dispName}}</span>   \n                                                </li>\n                                        </div>\n                                </ol>\n        </div>\n                \n        \n        <div class="container noBg">\n                <form #form = "ngForm" (ngSubmit) = "sendMessage()">\n        \n                        <mat-form-field>\n                                <input [(ngModel)] = "messageInput" name = "message" id = "username" type = "text" class = "form-control"\n                                #username = "ngModel" matInput placeholder = "Message..." required>\n                        </mat-form-field>\n                        <br>\n                        <button mat-raised-button>Send</button>\n                        <br>\n                </form>\n        </div>\n        \n</mat-card>\n'},sIbu:function(n,e){n.exports='\n\n<div class="fullpage">\n    <mat-card > \n        <span>Conversations :</span>\n        <mat-list >  \n            <mat-list-item *ngFor="let convo of convos">\n            \n              \n                  <button (click)="gotoConvo(convo)">{{ convo.otherUser != null ? convo.otherUser : convo.title }}</button>\n                  \n            </mat-list-item> \n        </mat-list>\n  </mat-card>\n\n</div>\n\n\n\n\n'},yYmg:function(n,e){n.exports="\n  .avatar {\n    vertical-align: middle;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n  }\n  .mat-card-avatar {\n    background-image: url('/assets/userPhoto.png');\n    vertical-align: middle;\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n}\n  .container-bottom {\n    float: right;\n    position: fixed;\n    bottom: 0;\n}\n  /* Chat containers */\n  .container {\n  border: 2px solid #dedede;\n  background-color: #f1f1f1;\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px 0;\n}\n  /* Chat containers */\n  .container2 {\n  border: 4px solid #dedede;\n  background-color: plum;\n  border-radius: 5px;\n  padding: 10px;\n  margin: 10px 0;\n  text-align: center;\n}\n  /* Darker chat container */\n  .darker {\n  border-color: #ccc;\n  background-color: #ddd;\n}\n  /* Clear floats */\n  .container::after {\n  content: \"\";\n  clear: both;\n  display: table;\n}\n  .right {\n  float: right;\n  margin-left: 20px;\n  margin-right:0;\n}\n  .message{\n  z-index: 5; \n    position: fixed; \n    display: flex;\n    align-self: flex-end; \n    bottom: 7%; \n    margin-bottom: 5px;\n    margin-left: 80%; \n}\n  /* Style time text */\n  .time-right {\n  float: right;\n  color: #aaa;\n}\n  /* Style time text */\n  .time-left {\n  float: left;\n  color: #999;\n}\n  .mat-card {\n  max-width: 800px;\n  margin: auto;\n  padding: 0px;\n  height: 100%;\n  background: rgba(214, 212, 212, 0.048);\n  background-repeat: repeat-x;\n  background-repeat: repeat-y;\n}\n  .mat-card2 {\n  max-width: 600px;\n  margin: auto;\n  padding: 0px;\n  height: 100%;\n  background: rgba(214, 212, 212, 0.048);\n  border: .4px solid rgb(59, 59, 59);\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n  .mat-card-header {\n \n  font-weight: bold;\n  display: inline;\n  \n}\n  .mat-card-title  {\n  margin-left: -16px;\n  margin-right: -16px;\n  margin-top: 0px;\n  color: rgba(0, 0, 0, 0.836);\n  background: rgba(34, 34, 34, 0.13);\n  padding: 5px;\n}\n  .mat-card-content {\n  margin: 0px;\n}\n  .mat-card>.mat-card-actions:last-child {\n  margin-bottom: 5px;\n \n}\n  .mat-card-actions .mat-button, .mat-card-actions .mat-raised-button{\n  margin: 0px;\n  margin-left: 22px;\n}\n  .mat-expansion-panel {\n  background: rgba(255, 254, 254, 0.151);\n}\n  .requirements {\n  margin-left: 30px;\n  margin-right: 30px;\n  \n}\n  .content .description{\n  font-size: 20px;\n  margin-left: 30px;\n  margin-right: 30px;\n}\n  .content .date,.location,.duration{\n  margin-left: 40px;\n  margin-right: 40px;\n}\n  .table{\n  width: 100%;\n  height: 100%;\n  overflow-x:  auto;\n  overflow-y:  auto;\n}\n  .mat-card {\n  font-family: Georgia, 'Times New Roman', Times, serif;\n}\n  .mat-list{\n  height: 100%;\n}\n\n"}}]);